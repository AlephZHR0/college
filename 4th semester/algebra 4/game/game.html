<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #board {
            display: grid;
            width: 100vw;
            height: 100vh;
        }

        body {
            margin: 0;
            padding: 0;
        }

        div {
            margin: 0;
            padding: 0;
        }

        p {
            margin: 0;
            padding: 0;
            font-size: 20vh;
            text-align: center;
            vertical-align: middle;
        }
    </style>
</head>

<body>
    <div class="title"></div>
    <div id="board"></div>
    <div class="score"></div>
    <script>
        function generateBoard(rows, cols) {
            var allBoardIDs = [];
            let board = document.getElementById("board");
            board.style.gridTemplateRows = "repeat(" + rows + ", 1fr)";
            board.style.gridTemplateColumns = "repeat(" + cols + ", 1fr)";
            let boardSize = rows * cols;
            let colNum = 1;
            let rowNum = 1;
            for (var i = 0; i < boardSize; i++) {
                var newDiv = document.createElement("div");
                divID = "r" + rowNum + "c" + colNum
                newDiv.setAttribute("id", divID);
                newDiv.setAttribute("class", "cell");
                newDiv.style.width = (board.offsetWidth / cols) + "px";
                newDiv.style.height = (board.offsetHeight / rows) + "px";
                newDiv.style.border = "1px solid black";
                // newDiv.style.backgroundColor = "rgb(" + Math.floor(Math.random() * 256) + "," + Math.floor(Math.random() * 256) + "," + Math.floor(Math.random() * 256) + ")";
                var newP = document.createElement("p");
                newP.classList.add("number");
                newP.style.lineHeight = newDiv.style.height;
                newDiv.style.fontSize = (newDiv.offsetHeight * 0.8) + "px";
                newDiv.appendChild(newP);
                board.appendChild(newDiv);
                allBoardIDs.push(divID);
                colNum++;
                if (colNum > cols) {
                    colNum = 1;
                    rowNum++;
                }
            }
            return allBoardIDs;
        }

        function placeNumbers(rows, cols, allBoardIDs) {
            let numbersToPlace = [1, 2, 3, 4, 5, 6, 7, 8, 9];
            let availableIDs = allBoardIDs;
            var board = document.getElementById("board");
            while (numbersToPlace.length != 0) {
                randomIndex = Math.floor(Math.random() * availableIDs.length)
                choosenID = availableIDs[randomIndex];
                console.log(choosenID);
                availableIDs.splice(randomIndex, 1);
                document.querySelector("#" + choosenID + " p").textContent = numbersToPlace.pop();
            }
        }

        function togleNumberVisibility () {
            var numbers = document.querySelectorAll(".number");
            for (var i = 0; i < numbers.length; i++) {
                if (numbers[i].style.visibility == "hidden") {
                    numbers[i].style.visibility = "visible";
                } else {
                    numbers[i].style.visibility = "hidden";
                }
            }
        }

        window.onload = function () {
            var urlParams = new URLSearchParams(window.location.search);
            var rows = parseInt(urlParams.get('rows')) || 3;
            var cols = parseInt(urlParams.get('cols')) || 3;
            allBoardIDs = generateBoard(rows, cols);
            placeNumbers(rows, cols, allBoardIDs);
        };

    </script>
</body>

</html>